<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Игра "Тратить и продавать деньги" — Категории товаров</title>
<style>
    * { box-sizing: border-box; }
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #e8f0fe;
        margin: 0;
        padding: 0 10px 40px;
        display: flex;
        justify-content: center;
        min-height: 100vh;
        color: #222;
    }
    main {
        max-width: 800px;
        width: 100%;
        background: white;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        padding: 20px 30px 40px;
        margin-top: 80px;
        position: relative;
    }
    h1 {
        text-align: center;
        margin-bottom: 5px;
        color: #1a4d2e;
        font-weight: 700;
        font-size: 2rem;
        user-select: none;
    }
    #money {
        position: fixed;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        background: #2c9a4d;
        color: white;
        padding: 15px 30px;
        font-size: 26px;
        font-weight: 700;
        border-radius: 0 0 15px 15px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.25);
        z-index: 1000;
        width: 100%;
        max-width: 800px;
        text-align: center;
        user-select: none;
    }
    .container {
        background: #2c9a4d;
        padding: 20px 30px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        width: 300px;
        text-align: center;
    }
    #infoText {
        cursor: pointer;
        color: white;
        font-weight: 600;
        font-size: 1.3em;
        border-bottom: 2px solid white;
        transition: color 0.3s, border-bottom-color 0.3s;
        user-select: none;
        padding-bottom: 4px;
    }
    #infoText:hover {
        color: white;
        border-bottom-color: white;
    }
    #extraText {
        margin-top: 15px;
        padding: 12px 18px;
        background-color: #e7f3ff;
        color: #212121;
        border-radius: 8px;
        font-size: 1em;
        line-height: 1.4;
        box-shadow: inset 0 0 8px #aac7ff;
        display: none;
        opacity: 0;
        transition: opacity 0.3s;
    }
    .content { padding-top: 100px; }
    /* Tabs Styles */
    .tabs {
        display: flex;
        justify-content: center;
        margin-bottom: 16px;
        margin-top: 16px;
    }
    .tab-btn {
        background: #dbedda;
        color: #2a7f62;
        border: none;
        border-radius: 10px 10px 0 0;
        font-size: 1.05rem;
        font-weight: 700;
        padding: 12px 30px;
        cursor: pointer;
        margin-right: 4px;
        outline: none;
        transition: background .28s, color .28s;
        box-shadow: 0 2px 7px rgba(0,0,0,0.07);
    }
    .tab-btn:last-child { margin-right: 0; }
    .tab-btn.active, .tab-btn:hover {
        background: #2c9a4d;
        color: #fff;
    }
    .tab-content {
        display: none;
        animation: fadein 0.35s;
    }
    .tab-content.active { display: block; }
    @keyframes fadein {
        from { opacity: 0; transform: translateY(12px);}
        to { opacity: 1; transform: none;}
    }
    .items {
        display: grid;
        grid-template-columns: repeat(auto-fit,minmax(230px,1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    .item-card {
        background: #fefefe;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        padding: 15px 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: transform 0.3s ease;
        user-select: none;
    }
    .item-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }
    .item-image {
        width: 140px;
        height: 140px;
        object-fit: contain;
        margin-bottom: 12px;
        filter: drop-shadow(0 0 1px rgba(0,0,0,0.1));
    }
    .item-title {
        font-weight: 700;
        font-size: 1.12rem;
        color: #2a7f62;
        margin-bottom: 6px;
        text-align: center;
    }
    .item-price {
        font-size: 1rem;
        color: #555;
        margin-bottom: 12px;
    }
    .item-controls {
        display: flex;
        align-items: center;
        gap: 10px;
        width: 100%;
        justify-content: center;
    }
    input.qty {
        width: 56px;
        padding: 6px;
        font-size: 1rem;
        border: 1.8px solid #ccc;
        border-radius: 6px;
        text-align: center;
        transition: border-color 0.3s;
    }
    input.qty:focus {
        outline: none;
        border-color: #2c9a4d;
        box-shadow: 0 0 6px #2c9a4daa;
    }
    button {
        padding: 8px 14px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        border-radius: 8px;
        border: none;
        color: white;
        transition: background-color 0.3s ease;
        user-select: none;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    button.buy { background-color: #2c9a4d; }
    button.buy:hover:not(:disabled) { background-color: #237a3e; }
    button.sell { background-color: #d9534f; }
    button.sell:hover:not(:disabled) { background-color: #b53b3a; }
    button:disabled {
        background-color: #bbb;
        cursor: not-allowed;
        box-shadow: none;
    }
    #message {
        margin-top: 15px;
        text-align: center;
        font-size: 1.2rem;
        font-weight: 600;
        color: #d9534f;
        min-height: 28px;
        user-select: none;
    }
    #purchases {
        background: #fefefe;
        padding: 20px 25px;
        border-radius: 12px;
        box-shadow: 0 3px 12px rgba(0,0,0,0.1);
        user-select: none;
    }
    #purchases h2 {
        margin-top: 0;
        font-size: 1.6rem;
        color: #2a7f62;
        text-align: center;
        margin-bottom: 15px;
    }
    #purchase-list {
        list-style: none;
        padding-left: 0;
        font-size: 1.1rem;
        color: #444;
        max-height: 180px;
        overflow-y: auto;
        margin-bottom: 15px;
    }
    #purchase-list li {
        padding: 6px 0;
        border-bottom: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        font-weight: 600;
    }
    #purchase-list li:last-child { border-bottom: none; }
    #total-sum {
        font-weight: 700;
        font-size: 1.3rem;
        color: #2a7f62;
        text-align: center;
        margin-bottom: 10px;
    }
    #transaction-count {
        text-align: center;
        font-size: 1rem;
        color: #555;
        margin-bottom: 10px;
        user-select: none;
    }
    @media (max-width: 600px) {
        main, #money { max-width: 100%!important; }
        .items { grid-template-columns: 1fr; }
        .container { width: 100%; }
        .tab-btn { padding: 10px 7px; font-size: .95rem;}
    }
</style>
</head>
<body>
<div id="money">Деньги: 430000000000 $</div>
<main>		
    <h1>Денежный Поток</h1>
    <div class="container">
        <div id="infoText">Информация</div>
        <div id="extraText">Добро пожаловать в игру Денежный Поток, где вашей целью является потратить как можно больше денег! На счету у вас начислена сумма экономики Дочерней компании UOR</div>
    </div>
    <div class="content">
        <!-- Табы для категорий -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="tab-general">Обычные</button>
            <button class="tab-btn" data-tab="tab-cars">Машины</button>
            <button class="tab-btn" data-tab="tab-planes">Самолеты</button>
            <button class="tab-btn" data-tab="tab-houses">Дома</button>
            <button class="tab-btn" data-tab="tab-other">Другое</button>
        </div>
        <!-- Контент по табам -->
        <div class="tab-content active" id="tab-general">
            <div class="items" aria-label="Список товаров — обычные"></div>
        </div>
        <div class="tab-content" id="tab-cars">
            <div class="items" aria-label="Список товаров — машины"></div>
        </div>
        <div class="tab-content" id="tab-planes">
            <div class="items" aria-label="Список товаров — самолеты"></div>
        </div>
        <div class="tab-content" id="tab-houses">
            <div class="items" aria-label="Список товаров — дома"></div>
        </div>
        <div class="tab-content" id="tab-other">
            <div class="items" aria-label="Список товаров — другое"></div>
        </div>
        <div id="message" role="alert" aria-live="polite"></div>
        <div id="purchases" aria-live="polite" aria-atomic="true" aria-relevant="all">
            <h2>Ваши покупки</h2>
            <ul id="purchase-list" aria-label="Список купленных товаров"></ul>
            <div id="total-sum">Общая сумма покупок: 0 $</div>
            <div id="transaction-count">Сделано транзакций: 0</div>
        </div>
    </div>
</main>
<script>
// ----- Категории товаров -----
const categories = {
    'general': [
        "Наушники","Кроссовки","Розы","Айфон 12 (128GB)","Айфон 13 (128GB)","Айфон 14 (256 GB)","Айфон 15 (512 GB)","Айфон 16 (1 TB)","Холодильник","Кондиционер","PlayStation 5 (1TB)","The Catalina","Orient","Сейф","Ноутбук Apple","Ноутбук Lenovo","Ноутбук Asus","iPad Air 13-inch","Тибетский Мастиф"
    ],
    'cars': [
        "Mercedes E V2112","Auddi RS70","Аурус Сенатор","Ламборгини Миора","Ролс-Ройс Куллиан","Ролс-Ройс Фантом","Сенво ZT1","Макларен В1","Кенигзегг","Ламборгини Венено","Бугатти Деева","Мерседес Майбах Эсколеро","Бугатти Центодиетти","Бугатти Нуар","Ролс-Ройс Bout Tale","Мерседес Аватар","Феррари 250 GDO"
    ],
    'planes': [
        "LEONARDO AW09 ","Bell 525","ATR EVO","DASSAULT FALCON 6X ","Боинг 777-9"
    ],
    'houses': [
        "Хай-Тек #1","Хай-Тек #2","Стоун Вуд","Загородный дом","Особняк","Особняк в Нью-Йорке"
    ],
    'other': [
        "Корона Елизаветы II"
    ]
};
const allProducts = [
    // general
    { name: "Наушники", price: 30, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-acs-1109-tw-0704_1.png" },
    { name: "Кроссовки", price: 62, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-clh-1119-cs-0010_1_1_.png" },
    { name: "Розы", price: 74, img: "https://kartinki.pics/pics/uploads/posts/2022-09/1663017246_15-kartinkin-net-p-shikarnii-buket-roz-na-prozrachnom-fone-kr-15.jpg" },
    { name: "Айфон 12 (128GB)", price: 800, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/6/7/6793065-1602664453.jpg" },
    { name: "Айфон 13 (128GB)", price: 1290, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-sbp-1105-sm-1511.png" },
    { name: "Айфон 14 (256 GB)", price: 1600, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/e/1/e12eeae2_2.png" },
    { name: "Айфон 15 (512 GB)", price: 2800, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-sbp-1105-sm-2467_1.png" },
    { name: "Айфон 16 (1 TB)", price: 4000, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-sbp-1105-sm-2890_1.png" },
    { name: "Холодильник", price: 3500, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-mt-bmt-1108-rb-0537_5.png" },
    { name: "Кондиционер", price: 1200, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-mt-bmt-1198-ac-0106_102000_1.png" },
    { name: "PlayStation 5 (1TB)", price: 1300, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-gaf-1106-gc-0052_1.png" },
    { name: "The Catalina", price: 700, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/1/_/1_28.png" },
    { name: "Orient", price: 500, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-wch-1106-wt-1141_1.png" },
    { name: "Сейф", price: 5200, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-vrt-1114-sf-0173_1.png" },
    { name: "Ноутбук Apple", price: 3400, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-kot-1114-nb-2892_1.png" },
    { name: "Ноутбук Lenovo", price: 1890, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-kot-1114-nb-2661_1.png" },
    { name: "Ноутбук Asus", price: 2300, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-kot-1114-nb-2944_10000.png" },
    { name: "iPad Air 13-inch", price: 2900, img: "https://kontakt.az/media/catalog/product/cache/a252e3db3d11365dd1457895056a5f34/t/m/tm-dg-tbq-1105-tb-0720_1.png" },
    { name: "Тибетский Мастиф", price: 5000, img: "https://kartinki.pics/pics/uploads/posts/2022-09/1663731875_2-kartinkin-net-p-bolshaya-pushistaya-rizhaya-sobaka-pintere-2.jpg" },
    // houses
    { name: "Хай-Тек #1", price: 45000, img: "https://www.ccnova.ru/upload/iblock/603/1yttky8xzwn8454eqcnhgislzycwboof/370_2_novatsiya.jpg" },
    { name: "Хай-Тек #2", price: 350000, img: "https://kartinki.pics/uploads/posts/2022-07/1657688548_4-kartinkin-net-p-kartinki-bolshoi-dom-4.jpg" },
    { name: "Стоун Вуд", price: 1000000, img: "https://kartinki.pics/uploads/posts/2022-07/1657688587_11-kartinkin-net-p-kartinki-bolshoi-dom-11.jpg" },
    { name: "Загородный дом", price: 12000000, img: "https://kartinki.pics/uploads/posts/2022-07/1657688541_15-kartinkin-net-p-kartinki-bolshoi-dom-15.jpg" },
    { name: "Особняк", price: 46000000, img: "https://kartinki.pics/uploads/posts/2022-07/1657688511_1-kartinkin-net-p-kartinki-bolshoi-dom-1.jpg" },
    { name: "Особняк в Нью-Йорке", price: 55000000, img: "https://kartinki.pics/uploads/posts/2022-07/1657688542_30-kartinkin-net-p-kartinki-bolshoi-dom-30.jpg" },
    // cars
    { name: "Mercedes E V2112", price: 50000, img: "https://static.wikia.nocookie.net/businessempire/images/c/c7/Cars_marcedes_e_v2112.png" },
    { name: "Auddi RS70", price: 56000, img: "https://static.wikia.nocookie.net/businessempire/images/b/b5/Cars_auddi_rr_7.png" },
    { name: "Аурус Сенатор", price: 383000, img: "https://static.wikia.nocookie.net/businessempire/images/8/8b/Cars_auros_senator.png" },
    { name: "Ламборгини Миора", price: 480000, img: "https://static.wikia.nocookie.net/businessempire/images/3/39/Cars_lambarginy_myora.png" },
    { name: "Ролс-Ройс Куллиан", price: 550000, img: "https://static.wikia.nocookie.net/businessempire/images/6/61/Cars_rols_roice_kullynan.png" },
    { name: "Ролс-Ройс Фантом", price: 626600, img: "https://static.wikia.nocookie.net/businessempire/images/4/46/Cars_rols_roice_fantome.png" },
    { name: "Сенво ZT1", price: 1000000, img: "https://static.wikia.nocookie.net/businessempire/images/2/23/Cars_senwo_zt1.png" },
    { name: "Макларен В1", price: 1320000, img: "https://static.wikia.nocookie.net/businessempire/images/3/35/Cars_macleran_b1.png" },
    { name: "Кенигзегг", price: 2100000, img: "https://static.wikia.nocookie.net/businessempire/images/8/82/Cars_konigzegg_own.png" },
    { name: "Ламборгини Венено", price: 3800000, img: "https://static.wikia.nocookie.net/businessempire/images/5/58/Cars_lambarginy_weneno_roadster.png" },
    { name: "Бугатти Деева", price: 5470000, img: "https://static.wikia.nocookie.net/businessempire/images/a/a3/Cars_buggaty_deeva.png" },
    { name: "Мерседес Майбах Эсколеро", price: 8000000, img: "https://static.wikia.nocookie.net/businessempire/images/5/55/Cars_marcedes_maybech_exolero.png" },
    { name: "Бугатти Центодиетти", price: 9000000, img: "https://static.wikia.nocookie.net/businessempire/images/5/5e/Cars_buggaty_centodiechi.png" },
    { name: "Бугатти Нуар", price: 19000000, img: "https://static.wikia.nocookie.net/businessempire/images/9/92/Cars_buggaty_le_voyture_noare.png" },
    { name: "Ролс-Ройс Bout Tale", price: 28000000, img: "https://static.wikia.nocookie.net/businessempire/images/f/fc/Cars_rols_roice_bout_tale.png" },
    { name: "Мерседес Аватар", price: 35000000, img: "https://static.wikia.nocookie.net/businessempire/images/c/c1/Cars_marcedes_vizio_awtr.png" },
    { name: "Феррари 250 GDO", price: 50000000, img: "https://static.wikia.nocookie.net/businessempire/images/9/9e/Cars_ferarry_250_gdo.png" },
    // planes
    { name: "LEONARDO AW09 ", price: 3500000, img: "https://topflight.ru/upload/medialibrary/e37/AW09_Security-services_robust-and-versatile_960400.jpg" },
    { name: "Bell 525", price: 15000000, img: "https://topflight.ru/upload/medialibrary/360/bell-525-at-sunset-landed-hero.jpg" },
    { name: "ATR EVO", price: 21600000, img: "https://cdn.airlines-inform.ru/upload/iblock/c5a/ATR-EVO.jpg" },
    { name: "DASSAULT FALCON 6X ", price: 47000000, img: "https://topflight.ru/upload/medialibrary/603/18_Falcon6X_USB53_Kopie.jpg" },
    { name: "Боинг 777-9", price: 442200000, img: "https://cdn.airlines-inform.ru/upload/iblock/a28/Boeing-777-9X.jpg" },
    // other
    { name: "Корона Елизаветы II", price: 1000000000, img: "https://upload.wikimedia.org/wikipedia/commons/1/19/Imperial_State_Crown.png" }
];
// --- Разделение products по категориям для вывода в нужный таб ---
const productsByCategory = {};
Object.keys(categories).forEach(cat => {
    productsByCategory[cat] = allProducts.filter(p => categories[cat].includes(p.name));
});
let money = 4130000000000;
let transactionCount = 0;
// Все покупки
const purchases = {};
allProducts.forEach(p => purchases[p.name] = 0);
// Элементы DOM
const moneyDisplay = document.getElementById('money');
const message = document.getElementById('message');
const purchaseList = document.getElementById('purchase-list');
const totalSumDisplay = document.getElementById('total-sum');
const transactionCountDisplay = document.getElementById('transaction-count');
// Функции вкладок
function switchTab(tabId) {
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
    document.querySelector(`[data-tab=${tabId}]`).classList.add('active');
    document.getElementById(tabId).classList.add('active');
}
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => switchTab(btn.getAttribute('data-tab')));
});
function updateMoney() {
    moneyDisplay.textContent = `Деньги: ${money.toLocaleString()} $`;
}
function updatePurchases() {
    purchaseList.innerHTML = '';
    let total = 0;
    for (const item in purchases) {
        const count = purchases[item];
        if (count > 0) {
            const li = document.createElement('li');
            li.textContent = `${item}`;
            const span = document.createElement('span');
            span.textContent = `${count} шт.`;
            li.appendChild(span);
            purchaseList.appendChild(li);
            total += count * allProducts.find(p => p.name === item).price;
        }
    }
    if (purchaseList.children.length === 0) {
        const li = document.createElement('li');
        li.textContent = "Пока нет покупок";
        li.style.fontStyle = 'italic';
        li.style.color = '#888';
        purchaseList.appendChild(li);
    }
    totalSumDisplay.textContent = `Общая сумма покупок: ${total.toLocaleString()} $`;
}
function getControls(category, name) {
    const cardsWrap = document.querySelector(`#tab-${category} .items`);
    const card = [...cardsWrap.children].find(card =>
        card.querySelector('button.buy').getAttribute('data-name') === name
    );
    if (!card) return null;
    return {
        buyBtn: card.querySelector('button.buy'),
        sellBtn: card.querySelector('button.sell'),
        qtyInput: card.querySelector('input.qty'),
    };
}
function updateButtons() {
    Object.keys(categories).forEach(cat => {
        productsByCategory[cat].forEach(product => {
            const controls = getControls(cat, product.name);
            if (!controls) return;
            let qty = parseInt(controls.qtyInput.value);
            if (isNaN(qty) || qty < 1) {
                qty = 1;
                controls.qtyInput.value = qty;
            }
            if (controls.sellBtn)
                controls.sellBtn.disabled = purchases[product.name] < qty;
            if (controls.buyBtn) controls.buyBtn.disabled = false;
        });
    });
}
function checkGameOver() {
    if (money === 0)
        message.textContent = 'Поздравляем! Вы потратили все деньги!';
    else message.textContent = '';
}
function handleBuy(category, name) {
    const controls = getControls(category, name);
    if (!controls) return;
    let qty = parseInt(controls.qtyInput.value);
    if (isNaN(qty) || qty < 1) qty = 1;
    const price = allProducts.find(p => p.name === name).price;
    let totalCost = price * qty;
    if (totalCost > money) {
        qty = Math.floor(money / price);
        if (qty === 0) {
            message.textContent = 'Недостаточно денег для покупки.';
            return;
        }
        totalCost = price * qty;
        controls.qtyInput.value = qty;
    }
    money -= totalCost;
    purchases[name] += qty;
    transactionCount++;
    updateMoney();
    updatePurchases();
    updateButtons();
    checkGameOver();
    message.textContent = `Вы купили ${qty} ${name}${qty > 1 ? 'ов' : ''} за ${totalCost.toLocaleString()} $.`;
    transactionCountDisplay.textContent = `Сделано транзакций: ${transactionCount}`;
}
function handleSell(category, name) {
    const controls = getControls(category, name);
    if (!controls) return;
    let qty = parseInt(controls.qtyInput.value);
    if (isNaN(qty) || qty < 1) qty = 1;
    if (purchases[name] < qty) {
        qty = purchases[name];
        if (qty === 0) {
            message.textContent = `У вас нет ${name} для продажи.`;
            return;
        }
        controls.qtyInput.value = qty;
    }
    const price = allProducts.find(p => p.name === name).price;
    const totalGain = price * qty;
    purchases[name] -= qty;
    money += totalGain;
    transactionCount++;
    updateMoney();
    updatePurchases();
    updateButtons();
    checkGameOver();
    message.textContent = `Вы продали ${qty} ${name}${qty > 1 ? 'ов' : ''} и получили ${totalGain.toLocaleString()} $.`;
    transactionCountDisplay.textContent = `Сделано транзакций: ${transactionCount}`;
}
function createItemCards() {
    Object.entries(productsByCategory).forEach(([category, products]) => {
        const itemsContainer = document.querySelector(`#tab-${category} .items`);
        products.forEach(product => {
            const card = document.createElement('div');
            card.className = 'item-card';
            card.setAttribute('role', 'group');
            card.setAttribute('aria-label', `${product.name}, цена ${product.price} долларов`);
            card.innerHTML = `
                <img src="${product.img}" alt="${product.name}" class="item-image" />
                <div class="item-title">${product.name}</div>
                <div class="item-price">${product.price.toLocaleString()} $</div>
                <div class="item-controls">
                    <button class="sell" data-name="${product.name}" aria-label="Продать ${product.name}" disabled>Продать</button>
                    <input type="number" min="1" value="1" class="qty" data-name="${product.name}" aria-label="Количество ${product.name}" />
                    <button class="buy" data-name="${product.name}" aria-label="Купить ${product.name}">Купить</button>
                </div>
            `;
            itemsContainer.appendChild(card);
        });
    });
}
function addEventHandlers() {
    Object.keys(productsByCategory).forEach(cat => {
        productsByCategory[cat].forEach(product => {
            const controls = getControls(cat, product.name);
            if (!controls) return;
            controls.qtyInput.addEventListener('input', () => {
                let val = parseInt(controls.qtyInput.value);
                if (isNaN(val) || val < 1) {
                    controls.qtyInput.value = 1;
                    val = 1;
                }
                if (controls.sellBtn && val > purchases[product.name])
                    controls.qtyInput.value = purchases[product.name];
                updateButtons();
            });
            controls.buyBtn.addEventListener('click', () => handleBuy(cat, product.name));
            controls.sellBtn.addEventListener('click', () => handleSell(cat, product.name));
        });
    });
}
const info = document.getElementById('infoText');
const extra = document.getElementById('extraText');
info.addEventListener('click', () => {
    if (extra.style.display === 'none' || extra.style.display === '') {
        extra.style.display = 'block';
        setTimeout(() => { extra.style.opacity = 1; }, 10);
    } else {
        extra.style.opacity = 0;
        setTimeout(() => { extra.style.display = 'none'; }, 300);
    }
});
function init() {
    createItemCards();
    updateMoney();
    updatePurchases();
    updateButtons();
    addEventHandlers();
    transactionCountDisplay.textContent = `Сделано транзакций: ${transactionCount}`;
}
init();
</script>
</body>
</html>
